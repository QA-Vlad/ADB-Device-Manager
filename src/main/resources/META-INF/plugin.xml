<!-- Файл: src/main/resources/META-INF/plugin.xml -->
<!--suppress PluginXmlI18n -->
<idea-plugin>
    <!-- 1. Уникальный ID плагина, основанный на пакете -->
    <id>io.github.qavlad.adbrandomizer</id>

    <!-- 2. Публичное имя плагина -->
    <name>ADB Screen Randomizer</name>

    <!-- 3. Информация об авторе -->
    <vendor url="https://github.com/QA-Vlad">QA-Vlad</vendor>

    <!-- 4. Описание плагина -->
    <description><![CDATA[
    A simple plugin to set random screen Sizes and DPI on connected Android devices using ADB commands.
    Very useful for testing UI adaptability and different screen configurations directly from the IDE.
    ]]></description>

    <!-- Версии IDE -->
    <idea-version since-build="223"/>

    <!-- 5. Секция зависимостей. Это критически важно. -->
    <depends>com.intellij.modules.platform</depends>

    <!-- 6. Секция расширений. Здесь мы "встраиваемся" в IDE. -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Startup activity для инициализации плагина при открытии проекта -->
        <postStartupActivity implementation="io.github.qavlad.adbrandomizer.startup.PluginStartupActivity"/>
        
        <!-- Регистрация  бокового окна (Tool Window) -->
        <toolWindow
                id="ADB Randomizer"
                anchor="right"
                icon="/icons/pluginIcon.svg"
                factoryClass="io.github.qavlad.adbrandomizer.ui.PluginToolWindowFactory"/>

        <!-- Регистрация группы для уведомлений, чтобы они красиво отображались -->
        <notificationGroup
                id="ADB Randomizer Notifications"
                displayType="BALLOON"/>
                
        <!-- Регистрация группы для отладочных уведомлений -->
        <notificationGroup
                id="ADB Randomizer Debug"
                displayType="BALLOON"/>
                
        <!-- Регистрация настроек плагина в разделе Tools -->
        <applicationConfigurable
                id="io.github.qavlad.adbrandomizer.settings"
                displayName="ADB Screen Randomizer"
                instance="io.github.qavlad.adbrandomizer.settings.PluginSettingsConfigurable"
                parentId="tools"
                order="first"/>
    </extensions>
    
    <!-- Actions section -->
    <actions>
        <!-- Add action to Tools menu -->
        <action id="io.github.qavlad.adbrandomizer.OpenToolWindow"
                class="io.github.qavlad.adbrandomizer.actions.OpenToolWindowAction"
                text="ADB Screen Randomizer"
                description="Open ADB Screen Randomizer tool window"
                icon="/icons/pluginIcon.svg">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>